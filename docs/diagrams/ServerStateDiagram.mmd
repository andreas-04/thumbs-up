stateDiagram-v2
    direction BT
    [*] --> DORMANT
    DORMANT --> [*]: 
    
    state DORMANT {
        [*] --> Idle
        Idle: âŒ No mDNS broadcast
        Idle: âŒ No services listening
        Idle: ðŸ”’ Storage locked (LUKS)
    }
    
    state ADVERTISING {
        [*] --> Waiting
        Waiting: ðŸ“¡ Avahi broadcasts mDNS
        Waiting: ðŸ”“ mTLS service listening (port 8443)
        Waiting: ðŸ”’ Storage still locked
        Waiting: â³ Waiting for authenticated client
    }
    
    state ACTIVE {
        [*] --> Active
        Active: ðŸ”“ LUKS storage unlocked
        Active: ðŸ“‚ NFS mounted (client-specific rules)
        Active: ðŸ›¡ï¸ Firewall rules per client IP
        Active: ðŸ“ Logging all access
        Active: ðŸ‘ï¸ Monitoring activity
    }
    
    DORMANT --> ADVERTISING: Button Press
    ADVERTISING --> ACTIVE: Client connects + mTLS succeeds
    ACTIVE --> ADVERTISING: All clients disconnect
    ADVERTISING --> DORMANT: No connections
    ACTIVE --> ACTIVE: Additional clients connect/disconnect 